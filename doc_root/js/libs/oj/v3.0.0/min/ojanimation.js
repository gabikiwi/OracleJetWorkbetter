/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","promise","ojs/ojcomponentcore"],function(a,g){a.ga={};o_("AnimationUtils",a.ga,a);a.ga.OA=function(c,b,d,e,f,h){var k=g(c),l=[].concat(f);return(new Promise(function(c){function g(){r||(k.off("transitionend webkitTransitionEnd",t),c(!0),r=!0)}function t(a){a=l.indexOf(a.originalEvent.propertyName);-1<a&&(1<l.length?l.splice(a,1):g())}var r=!1;null==d.css&&(d.css={});d.css.transition=a.ga.fza(f,e);var n=a.ga.AKa(k,b,d,e,h||f);a.ga.V9(k,b,1<n);k.on("transitionend webkitTransitionEnd",
t);window.setTimeout(function(){a.ga.V9(k,d,1<n);setTimeout(g,a.ga.QL(k)+100)},20)})).then(function(){b&&b.addClass&&k.removeClass(b.addClass);d&&d.addClass&&k.removeClass(d.addClass);a.ga.vKa(k)})};a.ga.xia=function(c,b,d,e){for(var f in b)if(b=a.ga.hca(f),!(d.hasOwnProperty(b)||e&&-1!=e.indexOf(b))){var g=c[0].style;d[b]=void 0===g[b]?g[a.ga.Wda(b)]:g[b]}};a.ga.AKa=function(c,b,d,e,f){var g=c.data("_ojSavedStyle")||{};b=b&&b.css?b.css:{};d=d&&d.css?d.css:{};e&&"all"===e.persist||(f=null);a.ga.xia(c,
b,g,f);a.ga.xia(c,d,g,f);c.data("_ojSavedStyle",g);e=c.data("_ojEffectCount")||0;c.data("_ojEffectCount",++e);return e};a.ga.vKa=function(a){var b=a.data("_ojEffectCount");if(1<b)a.data("_ojEffectCount",b-1);else if(b=a.data("_ojSavedStyle"))a.css(b),a.removeData("_ojSavedStyle"),a.removeData("_ojEffectCount")};a.ga.hca=function(a){if(0<=a.indexOf("-")){var b="";a=a.split("-");for(var d=0;d<a.length;d++){var e=a[d];e&&(b=b?b+(e.charAt(0).toUpperCase()+e.slice(1)):e)}return b}return a};a.ga.PBa=function(a){return a.replace(/([a-z])([A-Z])/g,
"$1-$2").toLowerCase()};a.ga.Wda=function(a){return"webkit"+a.charAt(0).toUpperCase()+a.slice(1)};a.ga.jaa=function(c,b,d,e,f){b.css[d]&&(d=a.ga.hca(d),(c=c[0].style[d]||c[0].style[a.ga.Wda(d)])&&0!=c.indexOf(e)&&(b.css[d]=c+f+b.css[d]))};a.ga.V9=function(c,b,d){b&&(b.css&&(d&&(a.ga.jaa(c,b,"transform","none"," "),a.ga.jaa(c,b,"transition","all",", ")),c.css(b.css)),b.addClass&&c.addClass(b.addClass),b.removeClass&&c.removeClass(b.removeClass))};a.ga.v$=function(a,b,d){b=a.css(b);var e=a.css(d+"Delay");
d=a.css(d+"Duration");a=e.split(",");d=d.split(",");b=b.split(",").length;for(var e=a.length,f=d.length,g=0,k=0;k<b;k++){var l=d[k%f],l=-1<l.indexOf("ms")?parseFloat(l):1E3*parseFloat(l);if(0<l)var m=a[k%e],m=-1<m.indexOf("ms")?parseFloat(m):1E3*parseFloat(m),g=Math.max(g,m+l)}return g};a.ga.QL=function(c){var b=a.ga.v$(c,"animationName","animation");c=a.ga.v$(c,"transitionProperty","transition");return Math.max(b,c)};a.ga.CAa=function(a,b){a.delay=a.delay||b.delay;a.duration=a.duration||b.duration;
a.timingFunction=a.timingFunction||b.timingFunction;a.persist=a.persist||b.persist};a.ga.Hn=function(c,b,d,e){return new Promise(function(f){function h(){n=!0;l()}function k(){r=!0;l()}function l(){if(r&&n){m.removeClass(p);m.removeClass(t);f(!0);var a={action:b,element:c};e?e._trigger("animateEnd",null,a):m.trigger("ojanimateend",a)}}var m=g(c),p="oj-animate-"+b,t=p+"-active",r=!1,n=!1,s=g.Event("ojanimatestart"),q={action:b,element:c,endCallback:k};e?s=!e._trigger("animateStart",null,q):(m.trigger(s,
q),s=s.isDefaultPrevented());if(!s){for(var s=[].concat(d),q=[],u={},v=0;v<s.length;v++){var w=s[v],x="",y;null!=w&&"none"!=w&&("string"==typeof w?(x=w,y={}):"object"==typeof w&&(x=w.effect,y=g.extend({},w)),a.ga.CAa(y,u),u=g.extend({},y));x&&a.ga[x]&&q.push(a.ga[x](c,y))}q.length?Promise.all(q).then(k):k()}m.addClass(p);window.setTimeout(function(){m.addClass(t);setTimeout(h,a.ga.QL(m)+100)},20)})};o_("AnimationUtils.startAnimation",a.ga.Hn,a);a.ga.QB=function(c,b){null==a.ga.YA&&(a.ga.YA=a.sc.Gd("oj-animation-effect-default-options"));
return g.extend({duration:"400ms"},a.ga.YA?a.ga.YA[c]:null,b)};a.ga.fza=function(c,b){var d="";if(c)for(var e=0;e<c.length;e++){var f=a.ga.PBa(c[e]),d=d+((0<e?", ":"")+f+" "+b.duration);b.timingFunction&&(d+=" "+b.timingFunction);b.delay&&(d+=" "+b.delay)}return d};a.ga.Hba=function(c,b,d,e,f){b=a.ga.QB(d,b);d={css:{opacity:e}};f={css:{opacity:f}};b&&(b.startOpacity&&(d.css.opacity=b.startOpacity),b.endOpacity&&(f.css.opacity=b.endOpacity));return a.ga.OA(c,d,f,b,["opacity"])};a.ga.fadeIn=function(c,
b){return a.ga.Hba(c,b,"fadeIn",0,1)};o_("AnimationUtils.fadeIn",a.ga.fadeIn,a);a.ga.fadeOut=function(c,b){return a.ga.Hba(c,b,"fadeOut",1,0)};o_("AnimationUtils.fadeOut",a.ga.fadeOut,a);a.ga.expand=function(c,b){return a.ga.Dba(c,b,!0)};o_("AnimationUtils.expand",a.ga.expand,a);a.ga.collapse=function(c,b){return a.ga.Dba(c,b,!1)};o_("AnimationUtils.collapse",a.ga.collapse,a);a.ga.Dba=function(c,b,d){b=a.ga.QB(d?"expand":"collapse",b);var e={},f={},h=b.direction||"height";c=g(c);var k=c.outerWidth(),
l=c.outerHeight(),m=c.css("maxWidth"),p=c.css("maxHeight"),t=e.css={},r=f.css={};"none"!==m&&(k=m);"none"!==p&&(l=p);m=[];if("both"===h||"height"===h)p=b.endMaxHeight||(d?l:0),t.maxHeight=b.startMaxHeight||(d?0:l),r.maxHeight=p,m.push("maxHeight");if("both"===h||"width"===h)h=b.endMaxWidth||(d?k:0),t.maxWidth=b.startMaxWidth||(d?0:k),r.maxWidth=h,m.push("maxWidth");return a.ga.OA(c[0],e,f,b,m)};a.ga.d5=function(c,b){return a.ga.Nka(c,b,!0)};o_("AnimationUtils.zoomIn",a.ga.d5,a);a.ga.e5=function(c,
b){return a.ga.Nka(c,b,!1)};o_("AnimationUtils.zoomOut",a.ga.e5,a);a.ga.Nka=function(c,b,d){b=a.ga.QB(d?"zoomIn":"zoomOut",b);var e={},f={},h=b.axis||"both";c=g(c);var h="both"===h?"scale":"x"===h?"scaleX":"scaleY",k=e.css={},l=f.css={};k.transform=h+"("+(d?0:1)+") translateZ(0)";l.transform=h+"("+(d?1:0)+") translateZ(0)";k.transformOrigin=b.transformOrigin||"center";return a.ga.OA(c[0],e,f,b,["transform"])};a.ga.L4=function(c,b){return a.ga.tq(c,b,!0)};o_("AnimationUtils.slideIn",a.ga.L4,a);a.ga.KTa=
function(c,b){return a.ga.tq(c,b,!1)};o_("AnimationUtils.slideOut",a.ga.KTa,a);a.ga.tq=function(c,b,d){b=a.ga.QB(d?"slideIn":"slideOut",b);var e={},f={},h=b.direction||"start";c=g(c);var k="0",l="0",m=e.css={},p=f.css={};if(b.offsetX||b.offsetY)b.offsetX&&(k=b.offsetX),b.offsetY&&(l=b.offsetY);else{var t=c.outerWidth(),r=c.outerHeight(),n="rtl"===a.Q.Oj();switch(h){case "left":k=(d?t:-t)+"px";break;case "right":k=(d?-t:t)+"px";break;case "top":l=(d?r:-r)+"px";break;case "bottom":l=(d?-r:r)+"px";break;
case "end":k=(d?-t:t)*(n?-1:1)+"px";break;default:k=(d?t:-t)*(n?-1:1)+"px"}}d?(m.transform="translate("+k+","+l+") translateZ(0)",p.transform="translate(0,0) translateZ(0)"):(m.transform="translate(0,0) translateZ(0)",p.transform="translate("+k+","+l+") translateZ(0)");return a.ga.OA(c[0],e,f,b,["transform"])};a.ga.oTa=function(c,b){b=a.ga.QB("ripple",b);var d={},e={},f=g(c),h=f.outerWidth(),k=f.outerHeight(),l=g("\x3cdiv style\x3d'position:absolute; overflow:hidden'\x3e"),m=g("\x3cdiv class\x3d'oj-animation-effect-ripple oj-animation-rippler'\x3e"),
p="static"==f.css("position")?f.position():{left:0,top:0};f.prepend(l);l.css({left:p.left+"px",top:p.top+"px",width:h+"px",height:k+"px"});l.prepend(m);f=d.css={};h=e.css={};a.ga.ELa(f,m,l,b);f.transform="scale(0) translateZ(0)";f.opacity=b.startOpacity||m.css("opacity");h.transform="scale(1) translateZ(0)";h.opacity=b.endOpacity||0;b.persist="all";return a.ga.OA(m[0],d,e,b,["transform","opacity"]).then(function(){l.remove()})};o_("AnimationUtils.ripple",a.ga.oTa,a);a.ga.ELa=function(c,b,d,e){b=b.width();
var f=d.width(),g=d.height();if(e.diameter){var k=e.diameter,l=parseInt(k,10);isNaN(l)||(b="%"==k.charAt(k.length-1)?Math.floor(Math.min(f,g)*(l/100)):l,c.width=b+"px",c.height=b+"px")}d="static"==d.css("position")?d.position():{left:0,top:0};f=a.ga.A$(e.offsetX,b,f,d.left);null!=f&&(c.left=f+"px");f=a.ga.A$(e.offsetY,b,g,d.top);null!=f&&(c.top=f+"px");e.color&&(c.backgroundColor=e.color)};a.ga.A$=function(a,b,d,e){var f;a=a||"50%";var g=parseInt(a,10);isNaN(g)||(f="%"==a.charAt(a.length-1)?g/100*
d-b/2:g-b/2,f=Math.floor(f+e));return f};a.ga.HVa=function(c,b){b=b||{};var d={fadeOut:1,collapse:1,zoomOut:1,slideOut:1},e=b.removeEffect||"fadeOut",f=g(".oj-animation-rippler",c);if(0===f.length)console.warn("No rippler so returning");else return e in d?a.ga[e](f,b).then(function(){f.remove()}):f.remove()};a.ga.u$=function(a){var b,d=a.match(/^([\+\-]?\d*\.?\d*)(.*)$/);a=parseFloat(d[1]);d=d[2];switch(d){case "deg":b=a-180+d;break;case "grad":b=a-200+d;break;case "rad":b=a-3.1416+d;break;case "turn":b=
a-.5+d;break;default:console.log("Unknown angle unit in flip animation: "+d)}return b};a.ga.lX=function(c,b,d,e,f){if(b&&"children"==b.flipTarget){var h=[];c=g(c).children();var k=g.extend({},b);delete k.flipTarget;var l=g.extend({},k);l.startAngle=a.ga.u$(b.startAngle||e);l.endAngle=a.ga.u$(b.endAngle||f);for(var m=0;m<c.length;m++)b=g(c[m]).hasClass("oj-animation-backface")?l:k,h.push(a.ga.lX(c[m],b,d,e,f));return Promise.all(h)}b=a.ga.QB(d,b);d={};var h={},k={css:d},l={css:h},p="rotateY(",t="2000px",
m="hidden",r="center";b&&("x"===b.axis&&(p="rotateX("),b.startAngle&&(e=b.startAngle),b.endAngle&&(f=b.endAngle),b.perspective&&(t=b.perspective),b.backfaceVisibility&&(m=b.backfaceVisibility),b.transformOrigin&&(r=b.transformOrigin));p="perspective("+t+") "+p;d.transform=p+e+")";d.backfaceVisibility=m;d.transformOrigin=r;h.transform=p+f+")";return a.ga.OA(c,k,l,b,["transform"],["transform","backfaceVisibility","transformOrigin"])};a.ga.oPa=function(c,b){return a.ga.lX(c,b,"flipIn","-180deg","0deg")};
o_("AnimationUtils.flipIn",a.ga.oPa,a);a.ga.pPa=function(c,b){return a.ga.lX(c,b,"flipOut","0deg","180deg")};o_("AnimationUtils.flipOut",a.ga.pPa,a)});