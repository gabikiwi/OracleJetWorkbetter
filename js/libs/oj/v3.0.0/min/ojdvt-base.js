/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojvalidation-number","ojs/internal-deps/dvt/DvtToolkit","ojdnd","promise"],function(a,g,c,b,d){function e(a,b){this.qIa=b;this.yKa=a;this.vza="/"}a.ml=function(a){this.Init(a)};o_("AttributeGroupHandler",a.ml,a);a.f.xa(a.ml,a.f,"oj.AttributeGroupHandler");a.ml.prototype.Init=function(a){this.aF={};this.BP=0;this.XZ={};for(var b in a)this.K1(b,a[b])};a.ml.prototype.Uo=function(){return[]};a.f.j("AttributeGroupHandler.prototype.getValueRamp",
{Uo:a.ml.prototype.Uo});a.ml.prototype.fg=function(a){if(this.XZ[a])return this.XZ[a];this.aF[a]||(this.eh||(this.eh=this.Uo().slice()),this.aF[a]=this.eh[this.BP],this.BP++,this.BP==this.eh.length&&(this.BP=0));return this.aF[a]};a.f.j("AttributeGroupHandler.prototype.getValue",{fg:a.ml.prototype.fg});a.ml.prototype.hma=function(){var a=[],b;for(b in this.aF)a.push({category:b,value:this.aF[b]});return a};a.f.j("AttributeGroupHandler.prototype.getCategoryAssignments",{hma:a.ml.prototype.hma});a.ml.prototype.K1=
function(a,b){this.XZ[a]=b};a.f.j("AttributeGroupHandler.prototype.addMatchRule",{K1:a.ml.prototype.K1});a.gA=function(a){this.Init(a)};o_("ShapeAttributeGroupHandler",a.gA,a);a.f.xa(a.gA,a.ml,"oj.ShapeAttributeGroupHandler");a.gA.bF="square circle diamond plus triangleDown triangleUp human".split(" ");a.gA.prototype.Uo=function(){return a.gA.bF};a.f.j("ShapeAttributeGroupHandler.prototype.getValueRamp",{Uo:a.gA.prototype.Uo});e.prototype.oKa=function(a,b,c,d){for(var e={};a&&-1<b.indexOf(c);){var f=
b.substring(0,b.indexOf(c));d&&void 0===a[f]&&(a[f]={});a=a[f];b=b.substring(b.indexOf(c)+1,b.length)}a&&(e.object=a,e.parameter=b);return e};e.prototype.ria=function(a){void 0===this.FG&&(a=this.oKa(this.yKa,this.qIa,this.vza,a),this.FG=a.object,this.p_=a.parameter)};e.prototype.fg=function(){this.ria(!1);return void 0===this.FG?void 0:this.FG[this.p_]};e.prototype.J4=function(a,b){this.ria(!0);if(b||!this.FG[this.p_])this.FG[this.p_]=a};a.je=function(b){this.bF=[];if(g(document.body).hasClass("oj-hicontrast"))this.bF=
a.je.s7.slice();else{if(!a.je.TA){var c=a.je.c2();c&&(a.je.p4(c),c.remove())}this.bF=0<a.je.TA.length?a.je.TA.slice():a.je.s7.slice()}this.Init(b)};o_("ColorAttributeGroupHandler",a.je,a);a.f.xa(a.je,a.ml,"oj.ColorAttributeGroupHandler");a.je.s7="#267db3 #68c182 #fad55c #ed6647 #8561c8 #6ddbdb #ffb54d #e371b2 #47bdef #a2bf39 #a75dba #f7f37b".split(" ");a.je.H8="oj-dvt-category1 oj-dvt-category2 oj-dvt-category3 oj-dvt-category4 oj-dvt-category5 oj-dvt-category6 oj-dvt-category7 oj-dvt-category8 oj-dvt-category9 oj-dvt-category10 oj-dvt-category11 oj-dvt-category12".split(" ");
a.je.TA=null;a.je.prototype.Uo=function(){return this.bF};a.f.j("ColorAttributeGroupHandler.prototype.getValueRamp",{Uo:a.je.prototype.Uo});a.je.c2=function(){if(a.je.TA)return null;var b=g(document.createElement("div"));b.attr("style","display:none;");b.attr("id","attrGps");g(document.body).append(b);for(var c=0;c<a.je.H8.length;c++){var d=g(document.createElement("div"));d.addClass(a.je.H8[c]);b.append(d)}return b};o_("ColorAttributeGroupHandler.createAttrDiv",a.je.c2,a);a.je.p4=function(b){a.je.TA=
[];b=b.children();for(var c=0;c<b.length;c++){var d=g(b[c]).css("color");d&&a.je.TA.push(d)}};o_("ColorAttributeGroupHandler.processAttrDiv",a.je.p4,a);var f={CSS_TEXT_PROPERTIES:function(a){var b={};a&&(a.hasClass("oj-gauge-metric-label")?(b["font-size"]=!0,b.color=!0):a.hasClass(a,"oj-chart-slice-label")?b.color=!0:a.hasClass("oj-treemap-node-header")&&(b["font-weight"]=!0));return f.hxa(a,b)},CSS_BACKGROUND_PROPERTIES:function(a){return f.$wa(a)},I7:"rgb(254, 0, 254)",yta:"Times",zta:"1px",K7:"1",
J7:"normal",rta:4,kC:{},WOa:function(a,b){return a.css(b)},$wa:function(a){var b={};a.css("border-top-color")&&(b["border-color"]=a.css("border-top-color"));a.css("border-width")&&a.css("border-style")&&"none"!=a.css("border-style")&&(b["border-width"]=a.css("border-width"));a.css("background-color")&&(b["background-color"]=a.css("background-color"));return b},hxa:function(a,b){var c={},d=a.css("font-family");d&&d!==f.yta&&(c["font-family"]=d.replace(/"/g,"'"));d=a.css("font-size");!d||-1<d.indexOf("px")&&
parseFloat(d)<f.rta||b["font-size"]||(c["font-size"]=d);(d=a.css("font-weight"))&&d!==f.K7&&!b["font-weight"]&&(c["font-weight"]=d);(d=a.css("color"))&&d!==f.I7&&!b.color&&(c.color=d);(d=a.css("font-style"))&&d!==f.J7&&(c["font-style"]=d);return c},zSa:function(b,c,d,e){for(var p=null,t=null,r="",n=0;n<d.length;n++)r=r+d[n]+" ";d={};var n={},s;for(s in e){var q=e[s];q instanceof Array||(q=[q]);var u=f.qFa(s,q);t||p||!u||(p=g(document.createElement("div")),p.attr("style","display:none;"),b.append(p),
p.attr("class",r),g(document.body).append(p),t=g(document.createElement("div")),t.css("font-size",f.zta),t.css("color",f.I7),t.css("font-weight",f.K7),t.css("font-style",f.J7),p.append(t));d[s]=q;u&&(n[s]=f.aza(t,s,q))}b=a.je.c2();for(s in e)f.OIa(n[s],c,s,d[s]);b&&(a.je.p4(b),b.remove());p&&p.remove()},aza:function(a,b,c){f.kC[b]||(f.kC[b]={});for(var d=null,e=0;e<c.length;e++){var t=c[e].property;t&&"undefined"==typeof f.kC[b][t]&&!d&&(d=g(document.createElement("div")),d.addClass(b),a.append(d))}return d},
OIa:function(a,b,c,d){for(var g=0;g<d.length;g++){var t=d[g],r=t.property;if(r){var n=f.kC[c][r];"undefined"==typeof n&&a&&(n=f.pKa(a,r),f.kC[c][r]=n);if(null!=n){t=new e(b,t.path);r=f[r];if(null!=r){var s=t.fg(),q="";if(null!=s){var s=f.OCa(s),u;for(u in n)-1===s.indexOf(u)&&(q+=u+":"+n[u]+";");q+=s}else for(u in n)q+=u+":"+n[u]+";";n=q}t.J4(n,null!=r)}}}},OCa:function(a){if(a instanceof Object){var b="",c;for(c in a)var d=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),b=b+(d+":"+a[c]+";");return b}return null!=
a&&"string"==typeof a?a:""},pKa:function(a,b){var c=f[b],c=c?c(a):f.WOa(a,b);return null==c||"string"==typeof c&&""==c.replace(/^\s+/g,"")?null:c},qFa:function(a,b){var c=f.kC[a];if(!c)return!0;for(var d=0;d<b.length;d++){var e=b[d].property;if(e&&"undefined"==typeof c[e])return!0}return!1}};a.ab("oj.dvtBaseComponent",g.oj.baseComponent,{_ComponentCreate:function(){this._super();this.Qu=this.S_=0;this.UG=null;this.Zm={};for(var b=this.rg(),c=0;c<b.length;c++)this.element.addClass(b[c]);this.FO=g(document.createElement("div"));
this.FO.attr("style","visibility:hidden;");this.element.append(this.FO);this.tg=(b=this.element[0].parentElement)&&b.yM?b.yM:new d.Context(this.element[0],null,this.FO[0]);this.tg.setReadingDirection(this.rd());this.tg.setTooltipAttachedCallback(a.Components.hf);this.tg.setOverlayAttachedCallback(a.Components.hf);this.tg.setTooltipStyleClass("oj-dvt-tooltip");this.tg.setDatatipStyleClass("oj-dvt-datatip");this.tg.setFixContextCallback(this.Dr.bind(this));this.tg.setDefaultFontFamily(this.FO.css("font-family"));
this.tg.setCustomElement(this.$h());g(document.body).hasClass("oj-hicontrast")&&d.Agent.setHighContrast(!0);this.Ha=this.qh(this.tg,this.Em,this);this.tg.getStage().addChild(this.Ha);!1!==d.requireJS&&(this.sLa(),this.uha());this.Yn();this.options._environment="jet";this.options._widgetConstructor=a.Components.md(this.element)},Mg:function(){this._super();"off"!=this.options.trackResize&&this.bV();this.Ir();this.Qg()},refresh:function(){this._super();this.tg.setReadingDirection(this.rd());this.uha();
this.Qg()},getNodeBySubId:function(a){var b=this.Ha&&this.Ha.getAutomation?this.Ha.getAutomation():null;return b?(a=this.Gl(a),b.getDomElementForSubId(a)):null},getSubIdByNode:function(a){var b=this.Ha&&this.Ha.getAutomation?this.Ha.getAutomation():null;return b?(a=b.getSubIdForDomElement(a))?this.xi(a):null:null},Gl:function(){return null},xi:function(){return null},aL:function(){f.zSa(this.element,this.options,this.rg(),this.ok())},rg:function(){return["oj-dvtbase"]},ok:function(){return{"oj-dvt-no-data-message":{path:"_statusMessageStyle",
property:"CSS_TEXT_PROPERTIES"}}},Il:function(){return[]},xj:function(){var b=this.options.translations,b={"DvtUtilBundle.CLEAR_SELECTION":b.labelClearSelection,"DvtUtilBundle.COLON_SEP_LIST":b.labelAndValue,"DvtUtilBundle.INVALID_DATA":b.labelInvalidData,"DvtUtilBundle.NO_DATA":b.labelNoData,"DvtUtilBundle.DATA_VISUALIZATION":b.labelDataVisualization,"DvtUtilBundle.STATE_SELECTED":b.stateSelected,"DvtUtilBundle.STATE_UNSELECTED":b.stateUnselected,"DvtUtilBundle.STATE_MAXIMIZED":b.stateMaximized,
"DvtUtilBundle.STATE_MINIMIZED":b.stateMinimized,"DvtUtilBundle.STATE_EXPANDED":b.stateExpanded,"DvtUtilBundle.STATE_COLLAPSED":b.stateCollapsed,"DvtUtilBundle.STATE_ISOLATED":b.stateIsolated,"DvtUtilBundle.STATE_HIDDEN":b.stateHidden,"DvtUtilBundle.STATE_VISIBLE":b.stateVisible,"DvtUtilBundle.SCALING_SUFFIX_THOUSAND":b.labelScalingSuffixThousand,"DvtUtilBundle.SCALING_SUFFIX_MILLION":b.labelScalingSuffixMillion,"DvtUtilBundle.SCALING_SUFFIX_BILLION":b.labelScalingSuffixBillion,"DvtUtilBundle.SCALING_SUFFIX_TRILLION":b.labelScalingSuffixTrillion,
"DvtUtilBundle.SCALING_SUFFIX_QUADRILLION":b.labelScalingSuffixQuadrillion},c=a.pb.vI("abbreviated");b["DvtUtilBundle.MONTH_SHORT_JANUARY"]=c[0];b["DvtUtilBundle.MONTH_SHORT_FEBRUARY"]=c[1];b["DvtUtilBundle.MONTH_SHORT_MARCH"]=c[2];b["DvtUtilBundle.MONTH_SHORT_APRIL"]=c[3];b["DvtUtilBundle.MONTH_SHORT_MAY"]=c[4];b["DvtUtilBundle.MONTH_SHORT_JUNE"]=c[5];b["DvtUtilBundle.MONTH_SHORT_JULY"]=c[6];b["DvtUtilBundle.MONTH_SHORT_AUGUST"]=c[7];b["DvtUtilBundle.MONTH_SHORT_SEPTEMBER"]=c[8];b["DvtUtilBundle.MONTH_SHORT_OCTOBER"]=
c[9];b["DvtUtilBundle.MONTH_SHORT_NOVEMBER"]=c[10];b["DvtUtilBundle.MONTH_SHORT_DECEMBER"]=c[11];return b},uha:function(){var a=this.xj();d.Bundle.addLocalizedStrings(a)},sLa:function(){var b={};b.numberConverterFactory=a.La.sma("number");b.dateToIsoConverter=function(b){return b instanceof Date?a.Ua.xe(b):b};b.isoToDateConverter=function(b){if("string"==typeof b){var c=a.Ua.TQ(b);b=c.toJSON()?a.Ua.xe(c):b;return a.Ua.$s(b)}return b};b.dateToIsoWithTimeZoneConverter=function(b){if(b instanceof Date){var c=
-1*b.getTimezoneOffset(),d=Math.floor(Math.abs(c)/60),e=Math.abs(c)%60,c=(0<=c?"+":"-")+(2!==d.toString().length?"0"+d:d)+":"+(2!==e.toString().length?e+"0":e);return a.Ua.xe(b)+c}return b};this.tg.setLocaleHelpers(b)},_destroy:function(){this.tg.hideTooltips();this.tg=null;var a=this.element[0].parentElement;a&&a.yM&&(a.yM=null);this.Ha.destroy&&this.Ha.destroy();this.Ha=null;this.O_();this.l7();this.element.children().remove();this.element.removeAttr("role").removeAttr("tabIndex").removeAttr("aria-activedescendant");
for(var a=this.rg(),b=0;b<a.length;b++)this.element.removeClass(a[b]);this._super()},_setOptions:function(a,b){this._superApply(arguments);var c=this.options.trackResize;"off"==c&&this.Xm?this.O_():"off"==c||this.Xm||this.bV();this.Ir();if(!this.e$){var d=!1,e=this.Il(),f=["highlightedCategories","selection","dataCursorPosition"];g.each(a,function(a){if(0>e.indexOf(a)&&0>f.indexOf(a))return d=!0,!1});d?this.Qg():(void 0!==a.highlightedCategories&&this.Ha.highlight(a.highlightedCategories),void 0!==
a.selection&&this.Ha.select(a.selection),void 0!==a.dataCursorPosition&&this.Ha.positionDataCursor&&this.Ha.positionDataCursor(a.dataCursorPosition))}},qh:function(){return null},Em:function(a){var b=a.type;"selection"===b?this.Ue("selection",a.selection):"categoryHide"===b||"categoryShow"===b?this.Ue("hiddenCategories",a.hiddenCategories):"categoryHighlight"===b?this.Ue("highlightedCategories",a.categories):"optionChange"===b?this.Ue(a.key,a.value,a.optionMetadata):"touchHoldRelease"===b&&this.options.contextMenu?
this.di(g.Event(a.nativeEvent),"touch"):"ready"===b&&0===this.Qu&&this.TK()},bV:function(){this.Xm||(this.Xm=this.Ji.bind(this),a.Q.bm(this.element[0],this.Xm,250))},O_:function(){this.Xm&&(a.Q.Gn(this.element[0],this.Xm),this.Xm=null)},Ji:function(){var a=this.element.width(),b=this.element.height();(null==this.CP||null==this.KN||5<=Math.abs(a-this.CP)+Math.abs(b-this.KN))&&this.Qg(!0)},Yn:function(){},Qg:function(b){this.tg.hideTooltips();this.wA();this.tg.isReadyToRender()?(this.CP=this.NK()?null:
this.element.width(),this.KN=this.NK()?null:this.element.height(),this.options._width=this.CP,this.options._height=this.KN,this.options._locale=a.qa.Nj(),this.options.dnd&&this.element.attr("draggable",!0),this.aL(),this.S_++,b?0===this.Qu&&this.Q_(b):this.mKa()&&this.Q_(),this.U_=!1):this.U_=!0},Ap:function(){this._super();this.U_&&this.Qg()},$n:function(){this._super();this.U_&&this.Qg()},pk:function(){this._super();this.tg.hideTooltips()},ao:function(){this._super();this.tg.hideTooltips()},Ue:function(a,
b,c){this.e$=!0;this.option(a,b,{_context:{xd:!0,Yv:c,kb:!0}});this.e$=!1},bi:function(a,b,c){if("touch"!==c)if("keyboard"===c){a=this.element[0].getBoundingClientRect();var d=this.Ha.getKeyboardFocus()?this.Ha.getKeyboardFocus().getBoundingClientRect():null;this.di(b,c,{position:{at:d?"left+"+(d.left+.5*d.width-a.left)+" top+"+(d.top+.5*d.height-a.top):"center"}})}else this._super(a,b,c)},DK:function(b){return(b=a.Components.md(b)("instance"))?b.Ha:null},sA:function(a){for(var b="",c=0;c<a.length;c++)b+=
"["+a[c]+"]";return b},vp:function(a){for(var b=[],c=0;0<a.indexOf("[",c);){var d=a.indexOf("[",c)+1,c=a.indexOf("]",c);b.push(Number(a.substring(d,c)));c+=1}return b},Jl:function(a){return Number(this.EK(a))},EK:function(a){var b=a.indexOf("[")+1,c=a.indexOf("]");return a.substring(b,c)},Hl:function(){return{}},CK:function(){if(!this.e_){this.e_={};var a=this,b=this.Hl().root;b&&b.forEach(function(b){a.e_[b]=!0})}return this.e_},mKa:function(){this.UG=d.JsonUtils.clone(this.options,null,this.CK());
this.Qu=0;var a=this,b=this.Hl(),c;for(c in b)b[c].forEach(function(b){if("root"===c)a.nia.bind(a)(a.options,a.UG,b);else{var d=a.options[c];if(d)for(var e=0;e<d.length;e++)a.nia.bind(a)(d[e],a.UG[c][e],b)}});return 0===this.Qu},nia:function(a,b,c){var d=new e(a,c),f=d.fg();f instanceof Function?f=Promise.resolve(f(this.F7(a))):this.$h()&&Array.isArray(f)&&(f=Promise.resolve(f),d.J4(f,!0));if(f instanceof Promise){var g=this.S_,r=this;f.then(function(a){r.aia(g,b,c,a)},function(){r.aia(g,b,c,[])});
this.Qu++}},aia:function(a,b,c,d){a===this.S_&&(this.Qu--,(new e(b,c)).J4(d,!0),0===this.Qu&&(this.Q_(),this.UG=null))},Q_:function(a){this.l7();var b=this.NK()&&this.Xm;b&&this.O_();this.Ha.render(a?null:this.UG,this.CP,this.KN);b&&this.bV();this.element.attr("role")?this.element.attr("tabindex",0):this.element.attr("tabindex",null)},F7:function(){return{}},NK:function(){return!1},whenReady:function(){if(this.gH)return Promise.resolve(!0);if(!this.CO){var a=this;this.CO=new Promise(function(b){a.B_=
b})}return this.CO},wA:function(){this.gH=!1;if(0===this.Qu&&!this.Hf){var b=a.Context.getContext(this.element[0]).Mj(),c={description:"The component identified by '"+this.element.attr("id")+"' is being loaded."};this.Hf=b.Jj(c)}},TK:function(){this.B_&&(this.B_(!0),this.B_=null);this.gH=!0;this.CO=null;this.Hf&&(this.Hf(),this.Hf=null)},Ir:function(){var a=this.options.tooltip;if("function"===typeof a)this.options.tooltip={renderer:a};else if(a&&a._renderer){var b=this;this.options.tooltip={renderer:this.xE(a._renderer,
"tooltip"),_templateCleanup:function(){b.ET("tooltip")}}}},xE:function(a,b){var c=this;return function(d){var e=document.createElement("div");e.style.display="none";a({parentElement:e,context:d});return(d=e.children[0])?(c.Zm[b]||(c.Zm[b]=[]),c.Zm[b].push(e),e.removeChild(d),g(e).remove(),d):null}},NT:function(a,b){var c=this;return function(d){var e=document.createElement("div");e.style.display="none";e.yM=c.tg;c.element.append(e);a({parentElement:e,data:d.data});return(d=e.children[0])?(c.Zm[b]||
(c.Zm[b]=[]),c.Zm[b].push(e),"http://www.w3.org/2000/svg"===d.namespaceURI?(e.removeChild(d),g(e).remove(),d):c.DK(d)):null}},l7:function(){for(var a in this.Zm)g(this.Zm[a]).remove();this.Zm={}},ET:function(a){this.Zm[a]&&(g(this.Zm[a]).remove(),this.Zm[a]=[])}},!0);a.U.ob("dvtBaseComponent","baseComponent",{properties:{trackResize:{type:"string"},translations:{properties:{labelAndValue:{type:"string"},labelClearSelection:{type:"string"},labelCountWithTotal:{type:"string"},labelDataVisualization:{type:"string"},
labelInvalidData:{type:"string"},labelNoData:{type:"string"},stateCollapsed:{type:"string"},stateDrillable:{type:"string"},stateExpanded:{type:"string"},stateHidden:{type:"string"},stateIsolated:{type:"string"},stateMaximized:{type:"string"},stateMinimized:{type:"string"},stateSelected:{type:"string"},stateUnselected:{type:"string"},stateVisible:{type:"string"}}}},methods:{},extension:{mb:"dvtBaseComponent"}})});